@model Scanton.Models.IndexViewModel
@{
    var tracker = 0;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Scanton</title>
    <link rel="stylesheet" href="@Url.Content("~/lib/bootstrap/dist/css/bootstrap.min.css")" />
    <link rel="stylesheet" href="@Url.Content("~/css/site.css")" asp-append-version="true" />
    <link rel="stylesheet" href="@Url.Content("~/css/style.css")" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <div class="header__grid header__grid--left-logo container flex flex-wrap items-center">

            <!-- Logo Section -->
            <div class="header__logo header__logo--top-left logo flex js-closes-menu">
                <h1 class="logo__h1 m-0">
                    <a class="logo__link inline-block" href="/">
                        <span class="flex" style="max-width: 130px;">
                            <img src="@Url.Content("~/images/SCRANTONLOGO.svg")" alt="Canopy Logo" width="260" height="70" loading="eager">
                        </span>
                    </a>
                </h1>
            </div>

            <!-- Search Bar Section -->
            <div class="search-container">
                <!-- Dropdown for Categories -->
                <div class="custom-select-container">

                    <label class="visually-hidden" for="product_types">Filter by Category</label>
                    <div class="dropdown-wrapper">
                        <i class="fa-solid fa-list dropdown-icon"></i>
                        <select id="product_types" class="search__product-types" name="category">
                            <option value="">All Categories</option>
                            <option value="Cheese &amp; Dairy">Cheese &amp; Dairy</option>
                            <option value="Cooking Ingredients">Cooking Ingredients</option>
                            <option value="Fish &amp; Seafood">Fish &amp; Seafood</option>
                            <option value="Fresh Fruit">Fresh Fruit</option>
                            <option value="Fresh Meat">Fresh Meat</option>
                            <option value="Fresh Vegetables">Fresh Vegetables</option>
                            <option value="Gift Card">Gift Card</option>
                            <option value="Meat &amp; Fish">Meat &amp; Fish</option>
                            <option value="Store Cupboard">Store Cupboard</option>
                            <option value="The Bakery">The Bakery</option>
                        </select>
                        <i class="fa-solid fa-chevron-down dropdown-arrow"></i>
                    </div>

                </div>


                <!-- Search Bar -->
                <input type="search"
                       class="search__input"
                       id="header-search"
                       name="q"
                       placeholder="Search for items..."
                       autocomplete="off"
                       aria-label="Search for products" />
                <button type="submit" class="search__icon-button" aria-label="Search">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                </button>
            </div>

            <!-- Icon Section -->
            <div class="header__icons flex justify-end mis-auto js-closes-menu">
                <a class="header__icon" href="/account/login">
                    <i class="fa-solid fa-user header-font-icon"></i> <!-- Font Awesome icon for user -->
                </a>



                <li style="position: relative; list-style-type: none;">
                    <a href="#" class="p-2 mx-1" id="cart">
                        <i class="fa-solid fa-cart-shopping header-font-icon"></i>
                    </a>
                    <div class="container-cart cart-dropdown hidden" id="cartDropdown">
                        <div class="shopping-cart">
                            <div class="shopping-cart-header">
                                <i class="fa fa-shopping-cart cart-icon"></i><span class="badge">3</span>
                                <div class="shopping-cart-total">
                                    <span class="lighter-text">Total:</span>
                                    <span class="main-color-text">$2,229.97</span>
                                </div>
                            </div>
                            <ul class="shopping-cart-items">
                                <li class="clearfix">

                                    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/cart-item1.jpg" alt="item1" />
                                    <div class="item-subdetails">
                                        <span class="item-name">KS Automatic Mechanic...</span>
                                        <span class="item-price">$849.99</span>
                                        <span class="item-quantity">Quantity: 01</span>
                                    </div>
                                </li>
                                <li class="clearfix">
                                    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/cart-item2.jpg" alt="item2" />

                                    <div class="item-subdetails">
                                        <span class="item-name">KS Automatic Mechanic...</span>
                                        <span class="item-price">$1,249.99</span>
                                        <span class="item-quantity">Quantity: 01</span>
                                    </div>

                                </li>
                                <li class="clearfix">
                                    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/cart-item3.jpg" alt="item3" />

                                    <div class="item-subdetails">
                                        <span class="item-name">Kindle, 6" Glare-Free To...</span>
                                        <span class="item-price">$129.99</span>
                                        <span class="item-quantity">Quantity: 01</span>
                                    </div>

                                </li>
                            </ul>
                            <a href="@Url.Action("Index","ViewCart")" class="button checkout-btn" style="color:white"><i class="fa-solid fa-cart-shopping"></i>View Cart</a>
                        </div>
                    </div>
                </li>


            </div>

            <!-- Navigation Menu -->
        </div>
        <div class="header-nav">
            <nav aria-label="Primary">
                <ul class="main-nav">
                    <li><a class="main-nav__item is-active" href="/">Home</a></li>
                    <li>
                        <details class="js-mega-nav">
                            <summary class="main-nav__item--toggle">
                                <a class="main-nav__item main-nav__item--primary" href="/collections">Groceries</a>
                            </summary>
                            <div class="main-nav__child mega-nav">
                                <ul class="child-nav">
                                    <li><a class="child-nav__item" href="/collections/fruit-vegetables">Fruit & Vegetables</a></li>
                                    <li><a class="child-nav__item" href="/collections/meat-fish">Meat & Fish</a></li>
                                    <li><a class="child-nav__item" href="/collections/store-cupboard">Store Cupboard</a></li>
                                    <li><a class="child-nav__item" href="/collections/the-bakery">The Bakery</a></li>
                                </ul>
                            </div>
                        </details>
                    </li>
                    <li>

                        <details class="js-mega-nav" open>

                            <summary class="main-nav__item--toggle">
                                <a id="shopLink" class="main-nav__item main-nav__item--primary" href="#">Shop <i b-mig7cuw6af="" class="fa-solid fa-chevron-down shop-arrow"></i></a>

                            </summary>
                            <div class="main-nav__child mega-nav" id="dropdownMenu" style="display: none;">
                                <ul class="navbar-nav">
                                    <li class="nav-item dropdown">
                                        <div class="dropdown-content mega_menus">
                                            <div class="container container-index nav-container">
                                                <div class="row">
                                                    @foreach (var group in Model.ParentCategories.Select((x, i) => new { x, i }).GroupBy(x => x.i / 6))
                                                    {
                                                        <div class="col-12">
                                                            <div class="row-parent">
                                                                @foreach (var parentCategory in group.Select(x => x.x))
                                                                {
                                                                    <div class="col-md-2">
                                                                        <!-- Adjusted for 6 items per row -->
                                                                        <div class="services-sec" data-id="@parentCategory.Name" data-tracker="@tracker">
                                                                            <div class="mob-dev-menu">
                                                                                <div class="menu-main">
                                                                                    <a href="" class="head-drop-links">
                                                                                        <div class="header-sub-menu" data-title="@parentCategory.Name" data-image="@parentCategory.ImagePath">

                                                                                            <div class="sub-menu-title">
                                                                                                <img src="@parentCategory.ImagePath" alt="@parentCategory.Name" class="heading-icon">
                                                                                                <p class="drop-head">@parentCategory.Name</p>
                                                                                            </div>
                                                                                        </div>
                                                                                    </a>
                                                                                </div>
                                                                                <div class="menu-sub-cat">
                                                                                    @foreach (var subCategory in parentCategory.Categories)
                                                                                    {
                                                                                        <a href="@Url.Action("Index", "CategoryPages", new { category_id = subCategory.Id })" data-title="@subCategory.Name" data-image="@subCategory.ImagePath">
                                                                                            <div class="header-sub-menu">
                                                                                                <div class="sub-menu-title">
                                                                                                    <p>@subCategory.Name</p>
                                                                                                </div>
                                                                                            </div>
                                                                                        </a>
                                                                                    }
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                }
                                                            </div>
                                                        </div>
                                                        tracker++;
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </details>





                    </li>
                    <li><a class="child-nav__item-mid" href="/pages/about-us">About Us</a></li>
                    <li><a class="child-nav__item-mid" href="/blogs/inspiration">Inspiration & Recipes</a></li>
                    <li><a class="child-nav__item-mid" href="@Url.Action("ContactUs","Home")">Contact Us</a></li>
                </ul>
            </nav>

        </div>
    </header>
    <div class="container">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </div>

    <footer class="py-5">
        <div class="container-fluid">
            <div class="row">

                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="footer-menu">
                        <img src=@Url.Content("~/images/SCRANTONLOGO.svg") width="240" height="70" alt="logo">
                        <div class="social-links mt-3">
                            <ul class="d-flex list-unstyled gap-2">
                                @foreach (var icon in (ViewBag.FooterIcon as List<IndexViewModel.SocialMedia>).Where(i => i.Is_Active))
                                {
                                    if (icon.AccountIcon != null)
                                    {
                                        <li>
                                            <a href="@icon.AccountURLLink" class="btn btn-outline-light btn-fonts">
                                                @Html.Raw(icon.AccountIcon)
                                            </a>
                                        </li>
                                    }
                                }
                            </ul>
                        </div>
                    </div>
                </div>




                <div class="col-md-2 col-sm-6">
                    <div class="footer-menu">
                        <h5 class="widget-title">Quick Links</h5>
                        <ul class="menu-list list-unstyled">
                            @foreach (var pageModel in (ViewBag.FooterPage as List<IndexViewModel.Page>).Where(i => i.Is_Active))
                            {
                                if (pageModel.PageCategory == "Quick Links")
                                {
                                    <li class="menu-item">
                                        <a href="@pageModel.PageUrl" class="nav-link">@pageModel.CustomePageTittle</a>
                                    </li>
                                }

                            }

                        </ul>
                    </div>
                </div>
                <div class="col-md-2 col-sm-6">
                    <div class="footer-menu">
                        <h5 class="widget-title">Customer Service</h5>
                        <ul class="menu-list list-unstyled">
                            @foreach (var pageModel in (ViewBag.FooterPage as List<IndexViewModel.Page>).Where(i => i.Is_Active))
                            {
                                if (pageModel.PageCategory == "Customer Service")
                                {
                                    <li class="menu-item">
                                        <a href="@pageModel.PageUrl" class="nav-link">@pageModel.CustomePageTittle</a>
                                    </li>
                                }

                            }

                        </ul>
                    </div>
                </div>

                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="footer-menu">
                        <h5 class="widget-title">Subscribe Us</h5>
                        <p>Subscribe to our newsletter to get updates about our grand offers.</p>
                        <form class="d-flex mt-3 gap-2" action="index.html">
                            <input class="form-control rounded-start rounded-0 bg-light footer-input" type="email" placeholder="Email Address" aria-label="Email Address">
                            <button class="btn btn-dark rounded-end rounded-0 footer-subscribe" type="submit">Subscribe</button>

                        </form>
                    </div>
                </div>
                <section>
                    @foreach (var footerDescription in (ViewBag.FooterDescription as List<IndexViewModel.FooterDescription>).Where(i => i.Is_Active))
                    {
                        <p>
                            @footerDescription.Title<br />
                            <br />
                            @Html.Raw(footerDescription.Description)
                        </p>
                    }


                </section>
            </div>
        </div>
    </footer>

    <div id="footer-bottom">
        <div class="container-lg">
            <div class="row">
                <div class="col-md-6 copyright">
                    <p>© 2024 SCRANTON. All rights reserved.</p>
                </div>

            </div>
        </div>
    </div>



    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
    <script>

         $(document).ready(function() {
            // Toggle dropdown menu on click
            $("#shopDropdownToggle").click(function(e) {
                e.preventDefault(); // Prevent default link action
                $("#shopDropdownMenu").toggle(); // Toggle the visibility of the dropdown menu
            });

            // Close the dropdown if clicked outside
            $(document).click(function(e) {
                if (!$(e.target).closest('#shopDropdownToggle').length && !$(e.target).closest('#shopDropdownMenu').length) {
                    $("#shopDropdownMenu").hide(); // Hide the dropdown if clicked outside
                }
            });
        });



        $(document).ready(function () {
            // Toggle the dropdown on cart icon click
            $("#cart").on("click", function (e) {
                e.preventDefault(); // Prevent default anchor behavior
                $("#cartDropdown").toggleClass("hidden").slideToggle(200);
            });

            // Close the dropdown when clicking outside
            $(document).on("click", function (e) {
                if (!$(e.target).closest("#cart, #cartDropdown").length) {
                    $("#cartDropdown").addClass("hidden").slideUp(200);
                }
            });
        });



           $(document).ready(function() {
            // Toggle dropdown menu on click
            $("#shopDropdownToggle").click(function(e) {
                debugger
                e.preventDefault(); // Prevent default link action
                $("#shopDropdownMenu").toggle(); // Toggle the visibility of the dropdown menu
            });

            // Close the dropdown if clicked outside
            $(document).click(function(e) {
                if (!$(e.target).closest('#shopDropdownToggle').length && !$(e.target).closest('#shopDropdownMenu').length) {
                    $("#shopDropdownMenu").hide(); // Hide the dropdown if clicked outside
                }
            });
        });



        

        $(document).ready(function() {
            $(".dropdown-wrapper").on("click", function() {
                // Toggle the dropdown open/close
                $(this).find("select").toggleClass("open");

                // Toggle arrow direction
                $(this).find(".dropdown-arrow").toggleClass("fa-chevron-down fa-chevron-up");
            });
        });

        document.addEventListener('DOMContentLoaded', function () {
            debugger
            const shopLink = document.querySelector('#shopLink');
            const details = shopLink.closest('details');
            const dropdownMenu = details.querySelector('.main-nav__child');

            // When hovering over the summary
            shopLink.addEventListener('mouseenter', function () {
                dropdownMenu.style.display = 'block';
            });

            // When the mouse leaves the summary or dropdown
            details.addEventListener('mouseleave', function () {
                dropdownMenu.style.display = 'none';
            });

            dropdownMenu.addEventListener('mouseenter', function () {
                dropdownMenu.style.display = 'block';
            });

            dropdownMenu.addEventListener('mouseleave', function () {
                dropdownMenu.style.display = 'none';
            });
        });




    </script>
</body>
</html>
